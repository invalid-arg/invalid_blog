<!doctype html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Invalid Argument</title>
	<meta name="generator" content="TextMate http://macromates.com/">
	<meta name="author" content="Mathew McLoughlin">
	<link rel="stylesheet" href="master.css" type="text/css" />
	<!-- Date: 2012-09-20 -->
	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-1746767-6']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>
</head>
<body>
	<h1>Invalid Argument</h1>
	<div data-bind="foreach: posts">
		<h2 data-bind="text: title"></h2>
		<div data-bind="html: body"></div>
	</div>
<script src="js/lib/jquery-1.8.2.min.js"></script>
<script src="js/lib/amplify.min.js"></script>
<script src="js/lib/knockout.js"></script>
<script src="js/lib/require.min.js"></script>
<script src="js/app/dataservice.post.js"></script>
<script src="js/app/model.post.js"></script>
<script>
	var root = this;
		
	$(document).ready(function() {
		define('jquery', [], function() { debugger; return root.$; });
		define('amplify', [], function() { return root.amplify; });
		define('knockout', [], function() { return root.ko; });
		
		require(['dataservice.post', 'model.post', 'jquery', 'knockout'], function(service, post, $, ko) {
			var viewModel = {
				posts: ko.observable()
			};

			service.getAll({ 
				success: function (data) {
					var posts = [];
					$.each(data, function (index, value) {
						posts.push(post.mapper(value));
					});
					viewModel.posts(posts);
					ko.applyBindings(viewModel);
				},
				error: function (data) { }
				})
		});
	});
</script>
</body>
</html>